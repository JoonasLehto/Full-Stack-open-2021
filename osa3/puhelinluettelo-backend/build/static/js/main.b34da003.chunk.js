(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(14),o=t.n(r),a=t(3),c=t(2),s=t(4),i=t.n(s),u="/api/persons",d={getAllPersons:function(){return i.a.get(u).then((function(e){return e.data}))},createPerson:function(e){return i.a.post(u,e).then((function(e){return e.data}))},updatePerson:function(e,n){return i.a.put("".concat(u,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return i.a.delete("".concat(u,"/").concat(e)).then((function(e){return e.data}))}},l=t(0),m=function(e){var n=e.message,t=e.isError;if(null===n)return null;var r=void 0!==t&&t?"notification error":"notification";return Object(l.jsx)("div",{className:r,children:n})},j=function(e){var n=e.options;return Object(l.jsxs)("div",{children:["filter shown with: ",Object(l.jsx)("input",{value:n.value,onChange:n.onChange})]})},f=function(e){var n=e.text,t=e.method;return Object(l.jsx)("button",{onClick:t,children:n})},b=function(e){var n=e.options;return Object(l.jsxs)("form",{onSubmit:n.onSubmit,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:n.nameInput.value,onChange:n.nameInput.onChange})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:n.numberInput.value,onChange:n.numberInput.onChange})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.persons,t=e.filter,r=e.removeAction,o=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(l.jsx)("div",{children:o.map((function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{style:{marginRight:"10px"},children:"".concat(e.name," ").concat(e.number)}),Object(l.jsx)(f,{text:"delete",method:(n=e,function(){window.confirm("Delete ".concat(n.name))&&r(n)})})]},e.name);var n}))})},p=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],o=function(){return d.getAllPersons().then((function(e){r(e)}))};Object(c.useEffect)((function(){o()}),[]);var s=Object(c.useState)(""),i=Object(a.a)(s,2),u=i[0],f=i[1],p=Object(c.useState)(""),v=Object(a.a)(p,2),O=v[0],g=v[1],x=Object(c.useState)(""),w=Object(a.a)(x,2),E=w[0],C=w[1],I=Object(c.useState)({message:null,isError:!1}),P=Object(a.a)(I,2),S=P[0],k=P[1],y=void 0,A=function(e){y&&clearTimeout(y),k(e),y=setTimeout((function(){k({message:null,isError:!1})}),5e3)},D=function(e){return function(n){e(n.target.value)}},J={value:E,onChange:D(C)},L={onSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===u})),r={name:u,number:O};void 0===n?d.createPerson(r).then((function(){A({message:"Added ".concat(r.name),isError:!1}),f(""),g(""),o()})).catch((function(e){A({message:e.response.data.error,isError:!0})})):window.confirm("".concat(r.name," is already added to phonebook, replace the old number with a new one?"))&&d.updatePerson(n.id,r).then((function(){A({message:"Updated ".concat(r.name),isError:!1}),f(""),g(""),o()})).catch((function(e){404===e.response.status?A({message:"Information of ".concat(r.name," has already been removed from server"),isError:!0}):400===e.response.status&&A({message:e.response.data.error,isError:!0}),o()}))},nameInput:{value:u,onChange:D(f)},numberInput:{value:O,onChange:D(g)}};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(m,{message:S.message,isError:S.isError}),Object(l.jsx)(j,{options:J}),Object(l.jsx)("h3",{children:"Add a new"}),Object(l.jsx)(b,{options:L}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(h,{persons:t,filter:E,removeAction:function(e){d.deletePerson(e.id).then((function(){A({message:"Deleted ".concat(e.name),isError:!1}),o()})).catch((function(n){404===n.response.status?A({message:"Information of ".concat(e.name," has already been removed from server"),isError:!0}):A({message:"Unknown error occurred while deleting ".concat(e.name," from server"),isError:!0}),o()}))}})]})};t(38);o.a.render(Object(l.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.b34da003.chunk.js.map